{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-6d107c68ee9126e1.js","utils.js","GameState.js","node_modules/@parcel/runtime-js/lib/runtime-f55a1543d79e90f6.js","GenericObject.js","Background.js","node_modules/@parcel/runtime-js/lib/runtime-a7a18b193f11f0b0.js","Ground.js","node_modules/@parcel/runtime-js/lib/runtime-0f042ad469030613.js","Bird.js","node_modules/@parcel/runtime-js/lib/runtime-dd971f2a5370fd0e.js","Pipe.js","PipePair.js","canvas.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bg8Kk\\\":\\\"index.5ad8849c.js\\\",\\\"aXNjT\\\":\\\"background.8939a860.png\\\",\\\"isji5\\\":\\\"ground.c527a7fc.png\\\",\\\"dp9nw\\\":\\\"bird.17b47c7c.png\\\",\\\"eJ2RD\\\":\\\"pipe.7471d7f9.png\\\"}\"));","export const createImage = function (imageSrc) {\r\n  const image = new Image();\r\n  image.src = imageSrc;\r\n  return image;\r\n};\r\n\r\nexport const randomIntFromRange = function (min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1) + min);\r\n};\r\n","import { scoreUI, liveScoreUI } from './canvas';\r\n\r\nexport default class GameState {\r\n   static startScreen() {\r\n      scoreUI.innerText = 0;\r\n      liveScoreUI.classList.remove('live-score');\r\n\r\n      return `<h2>Flappy Bird</h2>\r\n      <p>Press Start to play &#9654;</p>`;\r\n   }\r\n\r\n   static lostScreen(score) {\r\n      liveScoreUI.classList.add('live-score');\r\n\r\n      return `<h2>Oops! You Lost</h2>\r\n      <p class=\"result-point\">score : <span>${score}</span></p>\r\n      <p>Press Start to coninue playing &#9654;</p>`;\r\n   }\r\n}\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"aXNjT\")).toString();","import { canvas } from './canvas';\r\nimport { c } from './canvas';\r\n\r\nexport default class GenericObjects {\r\n  constructor({ position }, image) {\r\n    this.position = { x: position.x, y: position.y };\r\n    this.width = image.width;\r\n    this.height = image.height;\r\n    this.image = image;\r\n  }\r\n\r\n  draw(x = this.position.x) {\r\n    c.drawImage(this.image, x, this.position.y);\r\n  }\r\n\r\n  update() {}\r\n}\r\n","import { canvas } from './canvas';\r\nimport { c } from './canvas';\r\nimport GenericObjects from './GenericObject';\r\n\r\nexport default class Background extends GenericObjects {\r\n   constructor({ position }, image) {\r\n      super({ position }, image);\r\n      this.position = { x: position.x, y: position.y };\r\n      // this.width = image.width;\r\n      // this.height = image.height;\r\n      // this.image = image;\r\n   }\r\n\r\n   draw(x = this.position.x) {\r\n      c.drawImage(this.image, x, this.position.y);\r\n   }\r\n\r\n   update() {}\r\n}\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"isji5\")).toString();","import { canvas } from './canvas';\r\nimport { c } from './canvas';\r\nimport GenericObjects from './GenericObject';\r\n\r\nexport default class Ground extends GenericObjects {\r\n   constructor({ position }, image) {\r\n      super({ position }, image);\r\n      this.position = { x: position.x, y: position.y };\r\n      // this.width = image.width;\r\n      // this.height = image.height;\r\n      // this.image = image;\r\n   }\r\n\r\n   draw(x = this.position.x) {\r\n      c.drawImage(this.image, x, this.position.y);\r\n   }\r\n\r\n   update() {}\r\n}\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"dp9nw\")).toString();","import { canvas, PIPE_HEIGHT, PIPE_WIDHT, VIRTUAL_HEIGHT } from './canvas';\r\nimport { c } from './canvas';\r\n\r\nimport GenericObjects from './GenericObject';\r\n\r\nexport default class Bird extends GenericObjects {\r\n   #GRAVITY = 0.2;\r\n\r\n   constructor({ position }, image) {\r\n      super({ position }, image);\r\n\r\n      this.position = {\r\n         x: position.x - this.width / 2,\r\n         y: position.y - this.height / 2,\r\n      };\r\n\r\n      this.velocity = { x: 0, y: 0 };\r\n   }\r\n\r\n   draw() {\r\n      c.drawImage(this.image, this.position.x, this.position.y);\r\n   }\r\n\r\n   update() {\r\n      this.draw();\r\n\r\n      this.velocity.y += this.#GRAVITY * 1;\r\n      this.position.y += this.velocity.y;\r\n   }\r\n\r\n   collides(pipe) {\r\n      if (\r\n         this.position.x + 2 + (this.width - 4) >= pipe.position.x &&\r\n         this.position.x + 2 <= pipe.position.x + PIPE_WIDHT\r\n      ) {\r\n         if (\r\n            this.position.y + 2 + (this.height - 4) >= pipe.position.y &&\r\n            this.position.y + 2 <= pipe.position.y + PIPE_HEIGHT\r\n         ) {\r\n            return true;\r\n         }\r\n      }\r\n\r\n      return false;\r\n   }\r\n}\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"eJ2RD\")).toString();","import { canvas, PIPE_HEIGHT, VIRTUAL_WIDTH } from './canvas';\r\nimport { c } from './canvas';\r\nimport { randomIntFromRange } from './utils';\r\nimport { createImage } from './utils';\r\nimport pipeImg from './pipe.png';\r\n\r\nimport GenericObjects from './GenericObject';\r\n\r\nexport default class Pipe extends GenericObjects {\r\n   #PIPE_SCROLL = -0.5;\r\n\r\n   constructor({ position }, orientation, image = createImage(pipeImg)) {\r\n      super({ position }, image);\r\n      this.position = {\r\n         x: VIRTUAL_WIDTH,\r\n         y: position.y,\r\n      };\r\n\r\n      this.orientation = orientation;\r\n   }\r\n\r\n   draw() {\r\n      this.mirrorImage(\r\n         this.image,\r\n         this.position.x,\r\n         this.orientation == 'top'\r\n            ? this.position.y + PIPE_HEIGHT\r\n            : this.position.y,\r\n         false,\r\n         this.orientation == 'top' ? true : false\r\n      );\r\n   }\r\n\r\n   update() {\r\n      this.draw();\r\n   }\r\n\r\n   mirrorImage(image, x = 0, y = 0, horizontal = false, vertical = false) {\r\n      c.save();\r\n      c.setTransform(\r\n         horizontal ? -1 : 1,\r\n         0,\r\n         0,\r\n         vertical ? -1 : 1,\r\n         x + (horizontal ? image.width : 0), // x origin\r\n         y + 0 // y origin\r\n      );\r\n      c.drawImage(image, 0, 0);\r\n      c.restore();\r\n   }\r\n}\r\n","import {\r\n   canvas,\r\n   GAP_HEIGHT,\r\n   VIRTUAL_WIDTH,\r\n   VIRTUAL_HEIGHT,\r\n   PIPE_WIDHT,\r\n   PIPE_HEIGHT,\r\n   PIPE_SPEED,\r\n} from './canvas';\r\nimport { c } from './canvas';\r\nimport Pipe from './Pipe';\r\n\r\nexport default class PipePair {\r\n   constructor({ position }) {\r\n      this.position = { x: VIRTUAL_WIDTH + 32, y: position.y };\r\n      this.pipes = [\r\n         new Pipe({ position: { y: this.position.y } }, 'top'),\r\n         new Pipe(\r\n            { position: { y: this.position.y + PIPE_HEIGHT + GAP_HEIGHT } },\r\n            'bottom'\r\n         ),\r\n      ];\r\n\r\n      this.scored = false;\r\n   }\r\n\r\n   draw() {\r\n      this.pipes.forEach(pipe => pipe.update());\r\n   }\r\n\r\n   update() {\r\n      this.draw();\r\n\r\n      this.position.x -= PIPE_SPEED * 1;\r\n      this.pipes[0].position.x = this.position.x;\r\n      this.pipes[1].position.x = this.position.x;\r\n   }\r\n}\r\n","import { createImage, randomIntFromRange } from './utils';\r\n\r\nimport GameState from './GameState';\r\n\r\nimport backgroundImg from './background.png';\r\nimport Background from './Background';\r\nlet backgroundScroll = 0;\r\n\r\nimport groundImg from './ground.png';\r\nimport Ground from './Ground.js';\r\nlet groundScroll = 0;\r\n\r\nimport birdImg from './bird.png';\r\nimport Bird from './Bird';\r\n\r\nimport pipeImg from './pipe.png';\r\nimport Pipe from './Pipe';\r\nexport const GAP_HEIGHT = 90;\r\nexport const PIPE_SPEED = 2;\r\nexport const PIPE_HEIGHT = 288;\r\nexport const PIPE_WIDHT = 70;\r\n\r\nimport PipePair from './PipePair';\r\n// import audio from './audio';\r\n\r\nconst BACKGROUND_SCROLL_SPEED = 0.9;\r\nconst GROUND_SCROLL_SPEED = 1.8;\r\n\r\nconst BACKGROUND_LOOPING_POINT = 413;\r\n\r\nexport const canvas = document.getElementById('canvas');\r\nexport const c = canvas.getContext('2d');\r\n\r\nconst containerUI = document.querySelector('.flappy-gui-states');\r\nexport const scoreUI = document.querySelector('.score-point span');\r\nexport const liveScoreUI = document.querySelector('.score-point');\r\nconst resultScoreUI = document.querySelector('.result-point span');\r\n\r\nconst btnStart = document.getElementById('btn-start');\r\n\r\nexport const VIRTUAL_WIDTH = 512;\r\nexport const VIRTUAL_HEIGHT = 288;\r\n\r\ncanvas.width = VIRTUAL_WIDTH;\r\ncanvas.height = VIRTUAL_HEIGHT;\r\n\r\nexport let engine = false;\r\nlet background;\r\nlet ground;\r\nlet bird;\r\nlet pipesPairs;\r\nlet spawnTimer;\r\nlet lastY;\r\nlet score;\r\n\r\nlet msPrev = window.performance.now();\r\nlet fps = 60;\r\nlet fpsInterval = 1000 / fps;\r\nfunction init() {\r\n   background = new Background(\r\n      {\r\n         position: { x: -1, y: -1 },\r\n      },\r\n      createImage(backgroundImg)\r\n   );\r\n   ground = new Ground(\r\n      {\r\n         position: { x: -1, y: VIRTUAL_HEIGHT - 16 },\r\n      },\r\n      createImage(groundImg)\r\n   );\r\n   bird = new Bird(\r\n      {\r\n         position: { x: VIRTUAL_WIDTH / 2, y: VIRTUAL_HEIGHT / 2 },\r\n      },\r\n      createImage(birdImg)\r\n   );\r\n\r\n   pipesPairs = [];\r\n   spawnTimer = 0;\r\n   lastY = -PIPE_HEIGHT - Math.random() * 80 + 20;\r\n   score = 0;\r\n   containerUI.insertAdjacentHTML('afterbegin', GameState.startScreen());\r\n}\r\n\r\nfunction animate() {\r\n   requestAnimationFrame(animate);\r\n\r\n   const msNow = window.performance.now();\r\n   const elapsed = msNow - msPrev;\r\n   if (elapsed < fpsInterval) return;\r\n   msPrev = msNow - (elapsed % fpsInterval); // 3.34\r\n\r\n   c.fillStyle = 'white';\r\n   c.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n   backgroundScroll =\r\n   (backgroundScroll + BACKGROUND_SCROLL_SPEED * 1) % BACKGROUND_LOOPING_POINT; // prettier-ignore\r\n   groundScroll = \r\n   (groundScroll + GROUND_SCROLL_SPEED * 1) % VIRTUAL_WIDTH; // prettier-ignore\r\n\r\n   spawnTimer++;\r\n\r\n   if (spawnTimer > 60 && engine) {\r\n      // prettier-ignore\r\n      let y = Math.max(-PIPE_HEIGHT + 10, Math.min(lastY + randomIntFromRange(-20, 20), VIRTUAL_HEIGHT - 90 - PIPE_HEIGHT))\r\n      lastY = y;\r\n\r\n      pipesPairs.push(new PipePair({ position: { y: y } }));\r\n      spawnTimer = 0;\r\n   }\r\n\r\n   //////////////////////////////////\r\n   if (engine) {\r\n      background.draw(-backgroundScroll);\r\n\r\n      for (let p = pipesPairs.length - 1; p >= 0; p--) {\r\n         let pair = pipesPairs[p];\r\n\r\n         pair.pipes.forEach(pipe => {\r\n            if (bird.collides(pipe)) {\r\n               // prettier-ignore\r\n               audio.lost.play();\r\n               containerUI.insertAdjacentHTML(\r\n                  'afterbegin',\r\n                  GameState.lostScreen(score)\r\n               );\r\n               engine = false;\r\n            }\r\n         });\r\n\r\n         if (!pair.scored) {\r\n            if (pair.position.x + PIPE_WIDHT < bird.position.x) {\r\n               audio.scoring.play();\r\n               score = score + 1;\r\n               scoreUI.innerText = score;\r\n               pair.scored = true;\r\n            }\r\n         }\r\n\r\n         if (pair.position.x + PIPE_WIDHT < 0) {\r\n            pipesPairs.splice(p, 1);\r\n         } else {\r\n            pair.update();\r\n         }\r\n      }\r\n\r\n      ground.draw(-groundScroll);\r\n\r\n      if (bird.position.y + bird.height + ground.height > VIRTUAL_HEIGHT) {\r\n         audio.lost.play();\r\n         engine = false;\r\n         containerUI.insertAdjacentHTML(\r\n            'afterbegin',\r\n            GameState.lostScreen(score)\r\n         );\r\n      } else {\r\n         bird.update();\r\n      }\r\n   } else {\r\n      background.draw(-backgroundScroll);\r\n      ground.draw(-groundScroll);\r\n   }\r\n}\r\n\r\ninit();\r\nanimate();\r\n\r\nwindow.addEventListener('keypress', ({ key }) => {\r\n   switch (key) {\r\n      case ' ':\r\n         if (!engine) return;\r\n         audio.jump.play();\r\n         bird.velocity.y = -3.8;\r\n         break;\r\n      case 'p':\r\n         break;\r\n      case 'Enter':\r\n         init();\r\n         engine = true;\r\n         containerUI.innerHTML = '';\r\n         console.log('game restarted');\r\n         break;\r\n   }\r\n});\r\n\r\nbtnStart.addEventListener('click', () => {\r\n   init();\r\n   engine = true;\r\n   containerUI.innerHTML = '';\r\n});\r\n\r\nwindow.addEventListener('click', () => {\r\n   if (!engine) return;\r\n   audio.jump.play();\r\n   bird.velocity.y = -3.8;\r\n});\r\naudio.backgroundMusic.play();\r\n"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$9423fef94170f602$export$ec664d7487540b","imageSrc","image","Image","src","$752e96d2e8e11898$export$2e2bcd8739ae039","static","$1a4822e33c4b16cb$export$93e3942b88430289","innerText","$1a4822e33c4b16cb$export$4af7667cd1547d3b","classList","remove","score","add","$463e8387a4344c0d$exports","URL","resolve","import","meta","url","toString","$e94bc60de79cf9c1$export$2e2bcd8739ae039","constructor","position","this","x","y","width","height","draw","$1a4822e33c4b16cb$export$db3b6bfb95261072","drawImage","update","$ed7a2e739de8399c$export$2e2bcd8739ae039","super","$fa120b00b78403ad$exports","$15221c1ae80a3cfa$export$2e2bcd8739ae039","$23d1dd1e5ec75ee8$exports","$1e0f8b185b86aa15$export$2e2bcd8739ae039","GRAVITY","velocity","collides","pipe","$1a4822e33c4b16cb$export$da184ea8aa3885df","$1a4822e33c4b16cb$export$2e2de98a97118ee","$e0b370846536a191$exports","$d92531e7b45b5ead$export$2e2bcd8739ae039","PIPE_SCROLL","orientation","$parcel$interopDefault","$1a4822e33c4b16cb$export$c5f0d6696ae933ee","mirrorImage","horizontal","vertical","save","setTransform","restore","$4f49476eb7aa169a$export$2e2bcd8739ae039","pipes","$1a4822e33c4b16cb$export$116e029a3503791f","scored","forEach","$1a4822e33c4b16cb$export$6153d6da57d4629b","$1a4822e33c4b16cb$var$backgroundScroll","$1a4822e33c4b16cb$var$groundScroll","$1a4822e33c4b16cb$export$67ea982130081db","document","getElementById","getContext","$1a4822e33c4b16cb$var$containerUI","querySelector","$1a4822e33c4b16cb$var$btnStart","$1a4822e33c4b16cb$var$background","$1a4822e33c4b16cb$var$ground","$1a4822e33c4b16cb$var$bird","$1a4822e33c4b16cb$var$pipesPairs","$1a4822e33c4b16cb$var$spawnTimer","$1a4822e33c4b16cb$var$lastY","$1a4822e33c4b16cb$var$score","$1a4822e33c4b16cb$export$d3c662a6136faebb","$1a4822e33c4b16cb$var$msPrev","window","performance","now","$1a4822e33c4b16cb$var$init","$1a4822e33c4b16cb$export$10730452787c3720","Math","random","insertAdjacentHTML","startScreen","$1a4822e33c4b16cb$var$animate","requestAnimationFrame","msNow","elapsed","fillStyle","fillRect","$1a4822e33c4b16cb$var$BACKGROUND_SCROLL_SPEED","$1a4822e33c4b16cb$var$GROUND_SCROLL_SPEED","max","min","floor","push","p","pair","audio","lost","play","lostScreen","scoring","splice","addEventListener","key","jump","innerHTML","console","log","backgroundMusic"],"version":3,"file":"index.5ad8849c.js.map"}